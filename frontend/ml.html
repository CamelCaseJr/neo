<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Learning - NEO Monitor</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">
            <div class="logo-icon">üåç</div>
            <h1>NEO Monitor</h1>
        </div>
        
        <nav class="nav-menu">
            <a href="index.html" class="nav-item">
                <span class="nav-icon">üìä</span>
                <span>Dashboard</span>
            </a>
            <a href="neos.html" class="nav-item">
                <span class="nav-icon">ü™®</span>
                <span>NEOs</span>
            </a>
            <a href="ml.html" class="nav-item active">
                <span class="nav-icon">ü§ñ</span>
                <span>Machine Learning</span>
            </a>
            <a href="analytics.html" class="nav-item">
                <span class="nav-icon">üìà</span>
                <span>Analytics</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <div class="status-indicator">
                <span class="status-dot"></span>
                <span>Sistemas Online</span>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h2>Machine Learning</h2>
                <p class="subtitle">Treinamento e predi√ß√µes de periculosidade de NEOs</p>
            </div>
        </header>

        <!-- ML Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon purple">üéØ</div>
                <div class="stat-content">
                    <h3 class="stat-value" id="mlAccuracy">-</h3>
                    <p class="stat-label">Acur√°cia do Modelo</p>
                    <span class="stat-change" id="mlAccuracyChange">-</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon blue">üìä</div>
                <div class="stat-content">
                    <h3 class="stat-value" id="mlPrecision">-</h3>
                    <p class="stat-label">Precis√£o</p>
                    <span class="stat-change" id="mlPrecisionChange">-</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon green">üîç</div>
                <div class="stat-content">
                    <h3 class="stat-value" id="mlRecall">-</h3>
                    <p class="stat-label">Recall</p>
                    <span class="stat-change" id="mlRecallChange">-</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon orange">üìà</div>
                <div class="stat-content">
                    <h3 class="stat-value" id="mlF1Score">-</h3>
                    <p class="stat-label">F1-Score</p>
                    <span class="stat-change" id="mlF1Change">-</span>
                </div>
            </div>
        </div>

        <!-- Training Section -->
        <div class="action-cards-grid">
            <div class="action-card">
                <div class="action-header">
                    <h3>üéì Treinar Modelo</h3>
                    <span class="badge badge-purple">Treinamento</span>
                </div>
                <p class="action-description">
                    Treine o modelo com dados de um per√≠odo espec√≠fico ou com todos os dados dispon√≠veis.
                </p>
                
                <div class="form-group">
                    <label>Data In√≠cio</label>
                    <input type="date" id="trainStartDate" class="text-input">
                </div>
                
                <div class="form-group">
                    <label>Data Fim</label>
                    <input type="date" id="trainEndDate" class="text-input">
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="trainModel()">
                        Treinar com Per√≠odo
                    </button>
                    <button class="btn btn-secondary" onclick="trainModelAll()">
                        Treinar com Tudo
                    </button>
                </div>

                <div id="trainingResult" class="result-box" style="display: none;"></div>
            </div>

            <div class="action-card">
                <div class="action-header">
                    <h3>üîÆ Fazer Predi√ß√£o</h3>
                    <span class="badge badge-blue">Infer√™ncia</span>
                </div>
                <p class="action-description">
                    Use o modelo treinado para prever se um NEO √© perigoso com base em suas caracter√≠sticas.
                </p>
                
                <div class="form-group">
                    <label>Magnitude Absoluta (H)</label>
                    <input type="number" id="predMagnitude" class="text-input" placeholder="Ex: 20.5" step="0.01" value="20.0">
                    <small style="color: var(--text-muted); font-size: 0.85rem;">Quanto menor o valor, maior o objeto (escala logar√≠tmica)</small>
                </div>
                
                <div class="form-group">
                    <label>Di√¢metro M√≠nimo (m)</label>
                    <input type="number" id="predDiameterMin" class="text-input" placeholder="Ex: 100" step="0.01">
                </div>
                
                <div class="form-group">
                    <label>Di√¢metro M√°ximo (m)</label>
                    <input type="number" id="predDiameterMax" class="text-input" placeholder="Ex: 250" step="0.01">
                </div>

                <div class="form-group">
                    <label>Velocidade Relativa (km/s)</label>
                    <input type="number" id="predVelocity" class="text-input" placeholder="Ex: 13.9" step="0.01">
                    <small style="color: var(--text-muted); font-size: 0.85rem;">Velocidade em quil√¥metros por segundo</small>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="makePrediction()">
                        Fazer Predi√ß√£o
                    </button>
                    <button class="btn btn-secondary" onclick="reloadModel()">
                        Recarregar Modelo
                    </button>
                </div>

                <div id="predictionResult" class="result-box" style="display: none;"></div>
            </div>
        </div>

        <!-- Training History Chart -->
        <div class="chart-card">
            <div class="card-header">
                <h3>üìä Hist√≥rico de Treinamento</h3>
                <span class="badge">√öltimas sess√µes</span>
            </div>
            <div class="chart-container">
                <canvas id="trainingHistoryChart"></canvas>
            </div>
        </div>

        <!-- Model Info -->
        <div class="info-card">
            <h3>‚ÑπÔ∏è Sobre o Modelo</h3>
            <div class="info-grid">
                <div class="info-item">
                    <strong>Algoritmo:</strong>
                    <span>Random Forest Classifier</span>
                </div>
                <div class="info-item">
                    <strong>Features:</strong>
                    <span>Di√¢metro, Velocidade, Dist√¢ncia</span>
                </div>
                <div class="info-item">
                    <strong>Target:</strong>
                    <span>Periculosidade (is_potentially_hazardous_asteroid)</span>
                </div>
                <div class="info-item">
                    <strong>Valida√ß√£o:</strong>
                    <span>Stratified Train-Test Split (80/20)</span>
                </div>
            </div>
        </div>
    </main>

    <script src="js/config.js"></script>
    <script src="js/ml.js"></script>
</body>
</html>
